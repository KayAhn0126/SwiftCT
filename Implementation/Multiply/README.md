# 1629 곱셈

## 🍎 키워드
- 정수론 모듈러 연산
- 재귀 함수 기저사례
- 홀수 일때 예외 처리

## 🍎 문제 풀이
### 📖 문제 파악
- 무엇을 풀어야 하는지 보자.
- (A^B) % C
- 예제 입력을 대입해보면 (10^11)%12이다.
- 10^11은 1조이지만 입력의 범위는 A,B,C 모두 21억까지 들어올수 있다.
- 즉, 21억^21억까지 가능해야 한다는 의미.
- for 반복문으로는 감당이 불가능하다.

### 📖 재귀함수의 필요성
- **예제 입력 처럼 A = 10, B = 11, C = 12라고 가정하자.**
- 먼저 10^11을 계속 둘로 나눠보자
- 10 * 10^10
- 10 * 10^5 * 10^5
- 10 * (10 * 10^2 * 10^2) * (10 * 10^2 * 10^2)
- 10 * (10 * (10^1 * 10^1) * (10^1 * 10^1)) * (10 * (10^1 * 10^1) * (10^1 * 10^1))
- 기저 사례는 10^1이다. 이것을 바탕으로 재귀함수를 만들면 된다.

### 📖 위의 로직을 적용해보자.
- 풀어야 하는 문제는 결국 (10^11) % 12였다. 위의 로직을 적용해보자.
- (10 * 10^10) % 12 이제 정수론의 모듈러 연산을 적용 해보자.

### 📖 정수론의 모듈러 연산을 보자.
- 로직은 아래와 같다.
    - (A * B) % C = ((A % C) * (B % C)) % C

### 📖 10^1까지 도달하는 재귀함수를 통해 해결하자.
-                              10^11
-                            /       \
-                           /         \
-                       10^5           10^5
-                      /    \         /    \
-                     /      \       /      \
-                 10^2    10^2      10^2     10^2
-                 / \      / \      / \      / \
-                /   \    /   \    /   \    /   \
-            10^1  10^1 10^1 10^1 10^1 10^1 10^1 10^1
- 
- 간단한 예를 들면 (10^2 * 11) % 12는 ((10^1 % 12) * (10^1 % 12)) % 12로 표현할 수 있다.
- 이것을 코드로 나타내면 아래와 같다.
```swift
import Foundation

func numberTheory(_ a: Int, _ b: Int) -> Int {
    if b == 1 {
        return a % C
    }
    result = numberTheory(a, b / 2) 
    result = (result * result) % C
    
    if b % 2 == 1 {
        result = (result * a) % C
    }
    return result
}

let userInput = readLine()!.split(separator: " ").map { Int($0)! }
let A = userInput[0]
let B = userInput[1]
let C = userInput[2]
var result = 1

print(numberTheory(A, B))
```
- 나중에 이해를 위해 순서대로 사이클을 적어보자.
    - 까먹지 말기! 재귀함수가 계속 호출되는 동안 재귀함수 아래 문장들은 실행되지 않는다.
- print(numberTheory(10, 11))
    - 10^11 % 12의 해를 구해보자!
- result = numberTheory(10, 11 / 2) 으로 재귀함수 호출
    - 10^11을 반으로 나눈 값으로 호출. 위 표 참고.
- result = numberTheory(10, 5 / 2) 으로 재귀함수 호출
    - 10^5를 반으로 나눈 값으로 호출. 
- result = numberTheory(10, 2 / 2) 으로 재귀함수 호출
    - 10^2를 반으로 나눈 값으로 호출. 
- result = numberTheory(10, 1) 으로 재귀함수 호출
- if b == 1 { return a % C } 도달 후 10^1 % 12의 결과값 10 반환. 
    - 기저사례를 찍었으니 올라감!
- (10^2 % 12) = ((10^1 % 12) * (10^1 % 12)) % 12 으로 표현 가능했다.
-   result    = (   result   *    result  ) % C와 같고 위에서 계산한것처럼 10^1 % 12 = 10이였으니 아래와 같이 표현할 수 있다.
-   result    = (    10      *      10    ) % 12
- 즉, 10^2 % 12는 4를 반환한다.
- 이제 10^5 % 12가 실행될 차례다.
- 10^5 % 12는 10^4 % 12의 결과값에 10을 곱해주고 해당 결과값을 다시 12로 나눈 나머지를 구한다. 
    - 10^4 % 12 = (4 * 4) % 12 = 4가 된다. 10^5가 되려면 10을 곱해주고 다시 12로 나눠줘야한다.
    - (4 * 10) % 12 = 4
- 이로써 10^5 % 12는 4라는것을 구했다.
- 마지막으로 10^11 % 12는..
    - (10 * ((10^5 % 12) * (10^5 % 12) % 12)) % 12와 같다.
    - (10 * (    (4)     *     (4)   ) % 12)) % 12의 결과는 4이다.
- 그래서 결과는 4이다.

## 🍎 중요한점
- 나누기 연산자 (/)을 사용하면 중간중간에 홀수를 처리해야 하는 경우도 있다 그때마다 홀수를 어떻게 처리할지 생각하는것도 매우 중요하다.
- 기저사례를 찍고 올라오면서 b를 2로 나누었을때 나머지가 있다면(즉, 홀수라면) 해당 해에 곱하기 10 그리고 12로 나눈 나머지를 구하는 식을 사용해 그때마다 알맞는 값을 구했다.
```swift
func numberTheory(_ a: Int, _ b: Int) -> Int {
    if b == 1 {
        return a % C
    }
    result = numberTheory(a, b / 2)
    result = (result * result) % C
    
    if b % 2 == 1 { // 이 부분이다.
        result = (result * a) % C
    }
    return result
}
```
    
