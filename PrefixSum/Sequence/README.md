# 수열 2559

## 🍎 키워드
- 구간합
- 누적합
- 슬라이딩 윈도우

## 🍎 문제 접근
- 누적합 (prefix sum)으로 풀어야함
- 2중 반복문을 사용하면 O(N^2)
- 누적합을 사용하면 O(N)

## 🍎 누적합에서 공식으로 생각할 것 2가지
- 1. 누적합은 1부터 시작한다.
```swift
for i in 1..<temperatureArr.count {
    psum[i] = psum[i-1] + temperatureArr[i]
}
```
- 2. 누적합은 이전까지의 합 + 현재의 값이기 때문에 기존의 배열 맨 앞에 0을 추가해줘야 한다.
    - 문제에서 temperatureArr = [3 -2 -4 -9 0 3 7 13 8 -3]이고, 이 숫자들의 누적합을 구하라고 하면 0번째 인덱스에 0을 삽입해줘야한다.
    - 만약 맨앞에 0을 삽입하지 않으면, 위의 누적합 반복문을 돌렸을때 아래와 같은 결과가 나온다. 
        - i = 1, psum[1] = psum[0] + (-2)
        - 배열의 첫번째에 있는 3을 놓쳤다!
    - 0을 삽입하면 정상적인 누적합을 구할 수 있다.
        - i = 1, psum[1] = psum[0] + 3
        - ...
        - ...
        - ...

## 🍎 슬라이딩 윈도우 기본 공식
```swift
for i in K...N {
    let challengeNumber = psum[i] - psum[i-K]
    max = challengeNumber > max ? challengeNumber : max
}
```
- N이 총 요소의 갯수이고, 구간이 K라고 했을때
- N = 10, K = 5라면
- challengeNumber는 
    - psum[5] - psum[0]
    - psum[6] - psum[1]
    - psum[7] - psum[2]
    - psum[8] - psum[3]
    - psum[9] - psum[4]
    - psum[10] - psum[5]
    - 이렇게 좌측, 우측을 한칸씩 밀어내면서 구간합을 구할 수 있다. 

## 🍎 문제 풀이
- 누적합은 문제에서 수열이 주어지고 어떤 구간의 값의 합을 구해야 할 때 쓰일 수 있습니다. 
- 크기가 5인 배열arr이 있다고 해보자
```swift
let arr = [1,2,3,4,5]
```
- psum이 0으로 초기화 되었다고 가정하고 맨위 코드를 적용하면 크기가 5인 배열 arr의 누적합 psum은 아래와 같다
```swift
print(psum) 
// 인덱스는 1부터이다! (위 코드 참고)
// 1 2 3 4 5
//[1,3,6,10,15]
```
- X번과 Y번 구간의 구간합을 구한다면 (X < Y)
- (Y까지의 누적합) - (X-1까지의 누적합)으로 설명한다.
- 예를 들어 3-5구간의 합을 보고싶다면,
- psum[0 ~ 5의 누적합] = 15
- psum[0 ~ 3-1의 누적합] = 3
- 15 - 3 = 12
- 실제로 3 + 4 + 5는 12이므로 3부터 5까지의 누적합이 구해졌다!
